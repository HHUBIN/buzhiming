<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.buzhiming.mapper.ArticlePlusMapper">
  <resultMap id="ArticlesDTO" type="com.buzhiming.DTO.ArticlesDTO">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 26 23:27:29 CST 2020.
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />

    <result column="user_id" jdbcType="VARCHAR" property="user.id" />
    <result column="user_name" jdbcType="VARCHAR" property="user.name" />
    <result column="user_img_url" jdbcType="VARCHAR" property="user.imgUrl" />

    <result column="title" jdbcType="VARCHAR" property="title" />
    <result column="c" jdbcType="LONGVARCHAR" property="content" />
    <result column="comment_count" jdbcType="INTEGER" property="commentCount" />
    <result column="like_count" jdbcType="INTEGER" property="likeCount" />
    <result column="view_count" jdbcType="INTEGER" property="viewCount" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <collection property="labels"
                select="com.buzhiming.mapper.LabelRelatedPlusMapper.selectLabelById" column="{id=id}"></collection>
  </resultMap>
  <select id="getArticles" resultMap="ArticlesDTO">
     select a.*,a.content c,name user_name,b.img_url user_img_url from h_article a left join h_user b on a.user_id = b.id order by create_time desc

  </select>
  <select id="getArticlesByUserId" resultMap="ArticlesDTO">
     select a.*,left(a.content,200) c,name user_name,b.img_url user_img_url from h_article a left join h_user b on a.user_id = b.id where a.user_id = #{userId} order by create_time desc;

  </select>
  <update id="updateByPrimaryKey" parameterType="com.buzhiming.model.Article">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 02 23:54:55 CST 2020.
    -->
    update h_article
    set user_id = #{userId,jdbcType=VARCHAR},
    title = #{title,jdbcType=VARCHAR},
    comment_count = #{commentCount,jdbcType=INTEGER},
    content = #{content},
    like_count = #{likeCount,jdbcType=INTEGER},
    view_count = #{viewCount,jdbcType=INTEGER},
    create_time = #{createTime,jdbcType=TIMESTAMP},
    update_time = #{updateTime,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=VARCHAR}
  </update>

</mapper>